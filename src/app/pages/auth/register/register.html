<p-toast />

<style>
  .page-register {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 2rem;
    background: radial-gradient(circle at top, #e0f2fe, #fdf2ff);
    font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  }

  .register-card {
    width: 100%;
    max-width: 440px;
    background: #ffffff;
    border-radius: 18px;
    box-shadow: 0 18px 45px rgba(15, 23, 42, 0.12);
    padding: 2rem 2.25rem 2.1rem;
  }

  .register-title {
    font-size: 1.65rem;
    font-weight: 650;
    color: #0f172a;
    margin: 0 0 0.35rem;
  }

  .register-subtitle {
    margin: 0 0 1.25rem;
    font-size: 0.9rem;
    color: #64748b;
  }

  .register-field {
    margin-bottom: 1rem;
  }

  .register-label {
    display: block;
    font-size: 0.85rem;
    font-weight: 600;
    color: #475569;
    margin-bottom: 0.35rem;
  }

  .register-input,
  .register-input input {
    width: 100%;
    box-sizing: border-box;
  }

  .register-footer {
    margin-top: 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 0.75rem;
    font-size: 0.82rem;
  }

  .register-link {
    color: #4f46e5;
    text-decoration: none;
    font-weight: 500;
  }

  .register-link:hover {
    text-decoration: underline;
  }

  .register-msg {
    margin-top: 0.35rem;
  }

  .hint {
    font-size: 0.75rem;
    color: #64748b;
    margin-top: 0.25rem;
  }
</style>

<section class="page-register">
  <div class="register-card">
    <h1 class="register-title">Crear cuenta</h1>
    <p class="register-subtitle">
      Completa todos los campos. Contraseña mínimo 10 caracteres con al menos un símbolo especial.
      Solo mayores de 18 años.
    </p>

    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="register-field">
        <label class="register-label" for="usuario">Usuario</label>
        <input
          id="usuario"
          type="text"
          pInputText
          formControlName="usuario"
          [invalid]="isInvalid('usuario')"
          placeholder="Nombre de usuario"
          class="w-full"
        />
        @if (isInvalid('usuario')) {
          <p-message severity="error" size="small" variant="simple" class="register-msg">
            {{ getError('usuario') }}
          </p-message>
        }
      </div>

      <div class="register-field">
        <label class="register-label" for="email">Correo electrónico</label>
        <input
          id="email"
          type="email"
          pInputText
          formControlName="email"
          [invalid]="isInvalid('email')"
          placeholder="tu@correo.com"
          class="w-full"
        />
        @if (isInvalid('email')) {
          <p-message severity="error" size="small" variant="simple" class="register-msg">
            {{ getError('email') }}
          </p-message>
        }
      </div>

      <div class="register-field">
        <label class="register-label" for="password">Contraseña</label>
        <p-password
          id="password"
          formControlName="password"
          [invalid]="isInvalid('password')"
          placeholder="Mín. 10 caracteres y un símbolo"
          [toggleMask]="true"
          [feedback]="true"
          styleClass="w-full"
          inputStyleClass="w-full"
        />
        <p class="hint">Símbolos permitidos: {{ simbolosEspeciales }}</p>
        @if (isInvalid('password')) {
          <p-message severity="error" size="small" variant="simple" class="register-msg">
            {{ getError('password') }}
          </p-message>
        }
      </div>

      <div class="register-field">
        <label class="register-label" for="confirmPassword">Confirmar contraseña</label>
        <p-password
          id="confirmPassword"
          formControlName="confirmPassword"
          [invalid]="isInvalid('confirmPassword')"
          placeholder="Repite la contraseña"
          [toggleMask]="true"
          [feedback]="false"
          styleClass="w-full"
          inputStyleClass="w-full"
        />
        @if (isInvalid('confirmPassword')) {
          <p-message severity="error" size="small" variant="simple" class="register-msg">
            {{ getError('confirmPassword') }}
          </p-message>
        }
      </div>

      <div class="register-field">
        <label class="register-label" for="nombreCompleto">Nombre completo</label>
        <input
          id="nombreCompleto"
          type="text"
          pInputText
          formControlName="nombreCompleto"
          [invalid]="isInvalid('nombreCompleto')"
          placeholder="Tu nombre completo"
          class="w-full"
        />
        @if (isInvalid('nombreCompleto')) {
          <p-message severity="error" size="small" variant="simple" class="register-msg">
            {{ getError('nombreCompleto') }}
          </p-message>
        }
      </div>

      <div class="register-field">
        <label class="register-label" for="direccion">Dirección</label>
        <input
          id="direccion"
          type="text"
          pInputText
          formControlName="direccion"
          [invalid]="isInvalid('direccion')"
          placeholder="Calle, número, colonia, CP"
          class="w-full"
        />
        @if (isInvalid('direccion')) {
          <p-message severity="error" size="small" variant="simple" class="register-msg">
            {{ getError('direccion') }}
          </p-message>
        }
      </div>

      <div class="register-field">
        <label class="register-label" for="fechaNacimiento">Fecha de nacimiento</label>
        <p-datepicker
          id="fechaNacimiento"
          formControlName="fechaNacimiento"
          [invalid]="isInvalid('fechaNacimiento')"
          [maxDate]="maxDate"
          dateFormat="dd/mm/yy"
          placeholder="Solo mayores de 18 años"
          [showIcon]="true"
          styleClass="w-full"
        />
        @if (isInvalid('fechaNacimiento')) {
          <p-message severity="error" size="small" variant="simple" class="register-msg">
            {{ getError('fechaNacimiento') }}
          </p-message>
        }
      </div>

      <div class="register-field">
        <label class="register-label" for="telefono">Teléfono</label>
        <p-inputnumber
          id="telefono"
          formControlName="telefono"
          [invalid]="isInvalid('telefono')"
          placeholder="Solo números"
          [useGrouping]="false"
          styleClass="w-full"
          inputStyleClass="w-full"
        />
        @if (isInvalid('telefono')) {
          <p-message severity="error" size="small" variant="simple" class="register-msg">
            {{ getError('telefono') }}
          </p-message>
        }
      </div>

      <p-button
        type="submit"
        label="Enviar registro"
        styleClass="w-full"
        [disabled]="form.invalid"
      />

      <div class="register-footer">
        <span>¿Ya tienes cuenta?</span>
        <a class="register-link" routerLink="/auth/login">Ir al login</a>
      </div>
    </form>
  </div>
</section>
